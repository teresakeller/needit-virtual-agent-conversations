<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">6152eede87f041107a0ccaaf8bbb3566</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"e3463726b867434c827a94aaab7bb4c8","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"e3463726b867434c827a94aaab7bb4c8"}],"goals":[{"name":"primary","trigger_id":"e3463726b867434c827a94aaab7bb4c8","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"3d3838a8d3804a448e44d029a2d3de0b","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"8eaeceb00ae54da4b8c72011acd09e45","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"d85523393fbe4844bdcb18a3d3ef5c9e","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"cac77b32a94947d5a387e3b0fc28a781","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n      // Return the display value (Label) for the needit_type choice\n      return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n  })()"},"id":"eeb2fc48f3cb49c1960aab892eb94f3f","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"0151ee6a90de486fb154b693970e200f","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"f04666fe53b3429782098f9f17d0f1bf","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt Record to view\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n  \n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n  })(table)","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n  \n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n  })(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"f04666fe53b3429782098f9f17d0f1bf","fields":["priority","short_description","u_when_needed"],"id":"e8e0bcabb84e4765a2029d555e2a2443","name":"NeedIt Record","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"b11e4ff954254b548c526333b2dc32a7","name":"What to Update","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"2cf3e82f7e3d4f0db96e85126cdc89d3","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What would you like to update?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"6695a111c4c04ac8833a11aa5d02de6a","name":"Nothing"},{"type":"Branch","label":"When needed","expression":{"type":"Applicability","mode":"query","value":"what_to_update=when needed"},"id":"0f6ff6acd8fc4c978320688f2097cb23","name":"When needed"},{"type":"Branch","label":"Short description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=short description"},"id":"da5d53c1ee2d49d5a103dbc196a67821","name":"Short description"}],"id":"a284b674e8b44a0fb6a4c30ee7d3df72","goal_id":"primary"},{"type":"InputPrompt","variable_id":"6fef11780a164acb80462af03c513fae","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt  completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"5891605c6e6d4b948c2b3d7d880c6954","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"f04666fe53b3429782098f9f17d0f1bf","id":"e33bf138d25946adbe19ebbdffb2c0b6","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"9bd59f646eca4c858067971c6d859cbf","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Please enter the new short description\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"38721ee07fa540e180bc60f93badb171","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"f04666fe53b3429782098f9f17d0f1bf","id":"bb25d17565a24db69d3453c323f94510","name":"Change Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"query","value":"what_to_update=short description"}},{"type":"InputPrompt","variable_id":"14220ff458064d6b96491028c3cdf940","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"ebbf1bd897734fe8900f39f8153a9c75","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find More NeedIt Records?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"7d510be6875a4ea5ba2ed8115870adb1","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"7e16f7bc8538462c907f9bafd52be23b","name":"No"}],"id":"b9ba9ed45eab402ebcb455a41959d8ca","goal_id":"primary"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"f04666fe53b3429782098f9f17d0f1bf","fields":["priority","short_description","u_when_needed"],"id":"3449f87623d24ef5be36a91732c248ee","name":"Updated NeedIt Record","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ScriptedAction","script":"(function execute() {\n      // Add 1 to the search_count variable\n      vaVars.search_count = vaVars.search_count + 1;\n  })()\n","id":"9e55599e971e45b5baa896885cbee9e1","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n      // If the value of search_count is less than 3, return true\n      // otherwise, return false\n      if (vaVars.search_count &lt; 3)\n          return true;\n      else\n          return false;\n  })()"},"id":"ddcc615c52734ba1a617fa288365f017","name":"Less than 3"},{"type":"Branch","label":"More than 3","expression":{"type":"Applicability","mode":"query","value":""},"id":"6334473d72cf45198f6cd7d473b0a351","name":"More than 3"}],"id":"1fdaf02dcdaf44f085e691aba44a3ee4","goal_id":"primary"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n      // If Live Chat is available, inform users they will be transfered to a live agent\n      // otherwise, let them know how to work with more NeedIt records\n      if (vaSystem.isLiveAgentAvailable()){\n          return 'You have reached your NeedIt search limit. I will transfer you to a live agent for assistance.'\n      } else {\n          return 'You have reached your NeedIt search limit. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n      }\n  })()"},"id":"7a800d0d05524b74ba3e9eb3316d764d","name":"Limit Reached","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ScriptedAction","script":"(function execute() {\n      // Transfer to a live agent\n      vaSystem.connectToAgent()\n  })()","id":"6e344323dbd7410c986369aeca34ec2c","name":"Transfer to Agent","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n      // If Live Chat is available, return true\n      // otherwise, return false\n      if (vaSystem.isLiveAgentAvailable()){\n          return true;\n      } else {\n          return false;\n      }\n  })()"}}],"edges":[{"type":"Edge","source_node_id":"9e55599e971e45b5baa896885cbee9e1","target_node_id":"1fdaf02dcdaf44f085e691aba44a3ee4","id":"4586b57936804b31952d157b7e8bc50e"},{"type":"Edge","source_node_id":"b9ba9ed45eab402ebcb455a41959d8ca","target_node_id":"9e55599e971e45b5baa896885cbee9e1","branch_id":"7d510be6875a4ea5ba2ed8115870adb1","id":"3bfa7540d12244a5bbdf5f04467ba8de","name":"7d510be6875a4ea5ba2ed8115870adb1"},{"type":"Edge","source_node_id":"bb25d17565a24db69d3453c323f94510","target_node_id":"3449f87623d24ef5be36a91732c248ee","id":"3331bb08ef1447bdbc642441a6c58e88"},{"type":"Edge","source_node_id":"a284b674e8b44a0fb6a4c30ee7d3df72","target_node_id":"ebbf1bd897734fe8900f39f8153a9c75","branch_id":"6695a111c4c04ac8833a11aa5d02de6a","id":"37e1d141e06640d08c55b447547106b6","name":"6695a111c4c04ac8833a11aa5d02de6a"},{"type":"Edge","source_node_id":"3d3838a8d3804a448e44d029a2d3de0b","target_node_id":"d85523393fbe4844bdcb18a3d3ef5c9e","id":"f34df5afb88c4fa9aa94aadc1a4c399c"},{"type":"Edge","source_node_id":"d85523393fbe4844bdcb18a3d3ef5c9e","target_node_id":"eeb2fc48f3cb49c1960aab892eb94f3f","id":"24fe99e2097441f0b42ce597b9577515"},{"type":"Edge","source_node_id":"eeb2fc48f3cb49c1960aab892eb94f3f","target_node_id":"0151ee6a90de486fb154b693970e200f","id":"141b4784bcfe4749b018fd1c4ea2d247"},{"type":"Edge","source_node_id":"0151ee6a90de486fb154b693970e200f","target_node_id":"e8e0bcabb84e4765a2029d555e2a2443","id":"f82c76530a33446a8077cdb93296fdc6"},{"type":"Edge","source_node_id":"e8e0bcabb84e4765a2029d555e2a2443","target_node_id":"b11e4ff954254b548c526333b2dc32a7","id":"2696103f85ee49ca9543d79d693a1836"},{"type":"Edge","source_node_id":"b11e4ff954254b548c526333b2dc32a7","target_node_id":"a284b674e8b44a0fb6a4c30ee7d3df72","id":"b85223a4e3114434aca168a816f90fd5"},{"type":"Edge","source_node_id":"a284b674e8b44a0fb6a4c30ee7d3df72","target_node_id":"5891605c6e6d4b948c2b3d7d880c6954","branch_id":"0f6ff6acd8fc4c978320688f2097cb23","id":"debdff3f44fc4c17ae76fb960f3542a2","name":"0f6ff6acd8fc4c978320688f2097cb23"},{"type":"Edge","source_node_id":"5891605c6e6d4b948c2b3d7d880c6954","target_node_id":"e33bf138d25946adbe19ebbdffb2c0b6","id":"5d5a0034dea74291bce47d63a029822d"},{"type":"Edge","source_node_id":"a284b674e8b44a0fb6a4c30ee7d3df72","target_node_id":"38721ee07fa540e180bc60f93badb171","branch_id":"da5d53c1ee2d49d5a103dbc196a67821","id":"4d6cc652aab943cbbc71a865052ab26c","name":"da5d53c1ee2d49d5a103dbc196a67821"},{"type":"Edge","source_node_id":"38721ee07fa540e180bc60f93badb171","target_node_id":"bb25d17565a24db69d3453c323f94510","id":"efe8269806974dfa9f5104f8bd89e72a"},{"type":"Edge","source_node_id":"ebbf1bd897734fe8900f39f8153a9c75","target_node_id":"b9ba9ed45eab402ebcb455a41959d8ca","id":"44e2873fd61840679ca1229fa9d4eae9"},{"type":"Edge","source_node_id":"b9ba9ed45eab402ebcb455a41959d8ca","target_node_id":"8eaeceb00ae54da4b8c72011acd09e45","branch_id":"7e16f7bc8538462c907f9bafd52be23b","id":"88f9da09740240da9e101f0f4b66052c","name":"7e16f7bc8538462c907f9bafd52be23b"},{"type":"Edge","source_node_id":"e33bf138d25946adbe19ebbdffb2c0b6","target_node_id":"3449f87623d24ef5be36a91732c248ee","id":"8e0e81160fda486d9b144ff26c1b3ead"},{"type":"Edge","source_node_id":"3449f87623d24ef5be36a91732c248ee","target_node_id":"ebbf1bd897734fe8900f39f8153a9c75","id":"d0a50e10190e41dabbceee0e5c0703c1"},{"type":"Edge","source_node_id":"1fdaf02dcdaf44f085e691aba44a3ee4","target_node_id":"d85523393fbe4844bdcb18a3d3ef5c9e","branch_id":"ddcc615c52734ba1a617fa288365f017","id":"f6ed60ed81034675a48aa646329ad99f","name":"ddcc615c52734ba1a617fa288365f017"},{"type":"Edge","source_node_id":"1fdaf02dcdaf44f085e691aba44a3ee4","target_node_id":"7a800d0d05524b74ba3e9eb3316d764d","branch_id":"6334473d72cf45198f6cd7d473b0a351","id":"8dba8946a67541ef99fe03feb1812a5f","name":"6334473d72cf45198f6cd7d473b0a351"},{"type":"Edge","source_node_id":"7a800d0d05524b74ba3e9eb3316d764d","target_node_id":"6e344323dbd7410c986369aeca34ec2c","id":"d980db1ed6764249a06a378917c3d5fd"},{"type":"Edge","source_node_id":"6e344323dbd7410c986369aeca34ec2c","target_node_id":"8eaeceb00ae54da4b8c72011acd09e45","id":"d7536e0e55da4dd4907701186c70c296"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"list":false,"id":"7f89b31559b64a7baf9489f9ca9c0399","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"list":false,"id":"14d153c701544b2ab110186fb2099c5f","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"cac77b32a94947d5a387e3b0fc28a781","name":"needit_type","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"f04666fe53b3429782098f9f17d0f1bf","name":"needit_list","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Short description","element":"short description"},{"name":"When needed","element":"when needed"},{"name":"Nothing","element":"nothing"}],"id":"2cf3e82f7e3d4f0db96e85126cdc89d3","name":"what_to_update","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Date/Time","mode":"date","id":"6fef11780a164acb80462af03c513fae","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"8701b767478d4d91a0ebe5e386529ca1","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"new_short_description","list":false,"id":"9bd59f646eca4c858067971c6d859cbf","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"30ce6d88665646b3add5cd3ef2e3cd8b","name":"change_short_description","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","id":"14220ff458064d6b96491028c3cdf940","name":"search_again","formatType":"text","secure":false,"sensitive":false,"list":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"73edb1b8877401107a0ccaaf8bbb353e","domain":"global","topic_type":"STANDARD","channels":[],"id":"bcd60a82873401107a0ccaaf8bbb35a7","name":"_PRVW__2552eedeeff04110b6a7cf843178fb64","key_phrases":["Update NeedIt Records","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[],"triggerable_by_notification":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>bcd60a82873401107a0ccaaf8bbb35a7</design_topic_id>
        <name>_PRVW__2552eedeeff04110b6a7cf843178fb64</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-01-04 14:05:45</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>e152eede87f041107a0ccaaf8bbb356c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_729895_needit_vi">73edb1b8877401107a0ccaaf8bbb353e</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">73edb1b8877401107a0ccaaf8bbb353e</sys_scope>
        <sys_update_name>sys_cb_design_topic_e152eede87f041107a0ccaaf8bbb356c</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-01-04 14:05:45</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
